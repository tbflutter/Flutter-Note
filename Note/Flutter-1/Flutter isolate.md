<h2>Flutter isolate</h2>

<hr>

- 일반적으로 프로그래밍은 순차적으로 작업을 처리한다. 
- 하나의 작업이 끝나야 다음 작업으로 넘어간다. 
- 그러나 처리시간이 긴 작업을 만나면 사용자는 프로그램이 멈춘 것처럼 느낄 수 있다.



1. Concurrency(동시성) vs Parallelism(병렬성)

- 프로세서는 한번에 하나의 프로세스만 실행시킬 수 있다. 
- 그렇기 때문에, 프로세서가 하나일 경우 여러개의 프로세스를 동시에 처리하는 것은 불가능 하다.
- 그래서 OS가 Scheduling을 통해 여러 프로세스를 시간으로 나눠서 빠르게 전환하여 실행하는 방식으로 논리적으로 여러 개를 동시에 실행하는 것처럼 보이게 하는 것이 병행 프로세스, 즉 Concurrency이다.  
- 실전적으로 보자면 싱글 코어에서 멀티 쓰레드를 동작 시키는 방식이다. 

- 여러개의 물리적인 프로세서가 존재하고 각 프로세서가 하나의 프로세스를 전담하는 것, 즉 다중 처리 시스템이 병렬인 Parallelism이다. 
- 실제로 동시에 여러작업이 처리되는 것으로 멀티 코어에서 멀티 쓰레드를 동작시키는 방식이다. 

<h3>동시성</h3>

- 은행 업무를 보기위해 n명의 고객 대기열과 한명 이상의 은행직원

<h3>병렬성</h3>

- 은행 업무를 보기위해 n명의 고객 대기열과 n명의 은행직원

<hr>

2. Synchronous(동기) - Blocking vs Asynchronous(비동기) - Non-blocking



<hr>


> Isolate

- 모든 Dart 코드가 실행되는 곳으로 단일 스레드(Single Thread)가 이벤트 루프를 실행하고 있다. 

- 단일 스레드 내에 여러 개의 Isolate가 있는 형태 

- 일반적인 Thread와 유사한 개념이다. 

  - main isolate(thread)에서 무거운 작업으로 인해 performance나 반응성이 떨어진다면 다른 작업 thread를 만들어서 그곳에서 처리하게끔 하는 것이다. 

- isolate는 Single Thread이지만 Dart언어가 자체적인 비동기 프로그래밍을 지원하기 때문에 비동기 작업도 

  Event loop에 의해서 적절히 처리된다. 

- 그러나 기존 언어의 Thread와는 차이점이 존재한다. 

- 일반적인 Thread는 한 프로세스 내에서 메모리 영역의 **<i>"Code", "Data", "Heap"</i>** 영역을 공유하는 구조이다.

- 하지만 isolate는 이름처럼 말 그대로 "고립"과 같이 isolate의 Thread는 자체적으로 메모리를 가지고 있다. 

- 따라서 새로운 isolate를 생성하면 해당 isolate에 별도의 고유한 메모리를 가진 Thread가 하나 더 생기는 것이다.

  => 이는 메모리 공유가 되지 않는다는 점이다.

- isolate간에 함께 작업하려면 message를 주고받아야만 가능하다. 
- 불편하다고 생각할 수 있지만 멀티쓰레드 사용 시 늘 주의해야하는 공유자원에 대한 컨트롤(Lock)에 신경 쓰지 않아도 된다. 

<h3>Isolate는 분리된 작업 단위로, 각각의 메모리를 가진다. </h3>

- 그렇기에 Lock을 걸 수 없기에 경쟁 상태나 Deadlock이 발생하지 않는다. 

- main isolate에서 실행해야할 작업이 오래걸리거나 많아서 프레임을 낮추는 경우에는 isolate를 생성하여 처리할 수 있다. 개별 isolate를 만들고 처리하기 때문에 main isolate에 부담을 주지 않으면서 다른 작업들을 처리할 수 있다.
- main isolate에 부담을 주면 앱의 성능저하문제가 초래되기 때문

<hr>

<h3>Isolate 사용</h3>

- 가장 기본이 되는 Isolate는 **main isolate**로 런타임시에 생성된다. 
- **main isolate**는 필요에 따라 새로운 isolate를 만들어 쓰는데, isolate를 만드는 것을 스폰(spawn)이라고 한다. 

